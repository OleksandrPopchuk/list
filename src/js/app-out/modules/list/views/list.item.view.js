define(function(a){var b,c=a("underscore"),d=a("jquery"),e=a("template.collection"),f=a("common/base.view"),g=a("modules/list/collections/list.collection"),h=a("modules/list/views/list.item.details.view");return b=f.extend({collection:g,template:e["list.item.hbs"],additionalEvents:{"click .fn-list-item":"showItemDetails"},events:function(){return c.extend(f.prototype.events,this.additionalEvents)},initialize:function(){this.listenTo(this.collection,"change",function(a){this.model.id===a.id&&(this.render(a.attributes),this.setActiveListItem(a.id))})},render:function(a){return this.$el.html(this.template(a)),this.$el.find(".fn-list-item").attr("data-item-id",a.id),this},showItemDetails:function(a,b){var c,e,f,g=b||d(".fn-contact-details");this.collection.fetch().done(function(b){e=b,c=a?e.filter(function(b){return b.id==a.currentTarget.dataset.itemId})[0]:e[0],f=new h({model:this.collection.get(c.id)}),g.html(f.render(c).$el),this.setActiveListItem(c.id)}.bind(this))},setActiveListItem:function(a){d(".fn-list-item").removeClass("active"),d(".fn-list-item[data-item-id="+a+"]").addClass("active")}})});